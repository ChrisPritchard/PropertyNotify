# Property Notify

![.NET](https://github.com/ChrisPritchard/PropertyNotify/actions/workflows/dotnet.yml/badge.svg) [![NuGet](https://img.shields.io/nuget/v/PropertyNotify.svg)](https://www.nuget.org/packages/PropertyNotify/)

This small project includes two classes: a [Generator.cs](./PropertyNotify/Generator.cs) and a [NotifyAttribute.cs](./PropertyNotify/NotifyAttribute.cs).

Together they work to silently implement the INotifyChanged, PropertyChanged pattern, turning plain `{ get; set; }` properties into 'full' properties with a backing field that call a method when changed.

> **NOTE:** this project requires the target project you use it with to be  **dotnet 9** and **langversion 13** (the default for 9.0) to work, as it needs [partial properties](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-13.0/partial-properties).

The gist of it is this:

If you define a property like so:

```c#
using PropertyNotify;

public partial class ChildStyleMapFlat
{
  [Notify("OnPropChanged")]
  public partial bool Parent_BasicProperties { get; set; }

  private void OnPropChanged() 
  {
    // ...
  }

  // ...
}
```

And you reference this package as an 'analyzer', e.g.

```xml
<PackageReference Include="ProjectNotify" Version="1.0.0" OutputItemType="Analyzer" />
```

Then Generator.cs (which is an [incremental source generator](https://github.com/dotnet/roslyn/blob/main/docs/features/incremental-generators.cookbook.md)) will *silently* (as in you wont see the output, but the compiler will) generate the following:

```c#
// <auto-generated/>
public partial class ChildStyleMapFlat
{
  private bool parent_BasicProperties;
  public partial bool Parent_BasicProperties
  {
    get => parent_BasicProperties;
    set 
    {
        if (!EqualityComparer<bool>.Default.Equals(parent_BasicProperties, value))
        {
           parent_BasicProperties = value;
           OnPropChanged();
        }
    }
  }
}
```

That is, any property with the **Notify** attribute will be turned into a property with a backing field that calls your specified function (the default is '`OnPropertyChanged`') when the property's value changes.

Simple!

There is a test project in the source repo that shows this working, as well.
